@{

    
    var userNameMessage = string.Empty;
    var passwordMessage = string.Empty;
    var emailMessage = string.Empty;
    
    Validation.Add( "email", Validator.Regex( @"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$", "Invalid format for an email address" ) );
    Validation.RequireField( "uName", "Required field" );
    Validation.RequireField( "uPwd", "Required field" );
        Validation.RequireField( "uPwdr", "Required field" );

    if ( IsPost ) {
        var un = Request["uName"];
        var up = Request["uPwd"];
        var upr = Request["uPwdr"];
        var em = Request["email"];

        var db = Database.Open( "GP" );
        var sqlSelect = string.Empty;
        bool valid = true;
        
        sqlSelect = "SELECT * from rc_Login where rcUser=@0 and rcPwd=@1";
        var data = db.QuerySingle( sqlSelect, un, up );

        sqlSelect = "SELECT * from rc_Login WHERE email=@0";
        var e_data = db.QuerySingle( sqlSelect, em );

        if ( e_data != null ) {
            emailMessage = "There is an Account with this email";
            valid = false;
        }
        
        if ( data != null ) {
            userNameMessage = "User Name already exist";
            valid = false;
        }
        
        if ( valid ) {
            if ( up != upr ) {
                passwordMessage = "Password doesn't match";
            } else {
                int r = db.Execute( "INSERT INTO rc_Login VALUES (@0, @1, @2)", un, up, em );
                if ( r == 0 ) {
                    // Error
                } else {
                    Session["userName"] = un;
                    Response.Redirect( "~/groups" );

                }


            }
        }
        

    }
}

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/jquery-ui.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/mvc/4.0/jquery.validate.unobtrusive.js"></script>
    <link type="text/css" rel="Stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/themes/black-tie/jquery-ui.css" />
    <link href="~/rcLayouts/default/css/loginStyle.css" rel="stylesheet" />
</head>
<body >
    <form method="post" action="">


        <fieldset style="background-color:white; width:312px; font-size:10px">
            <ol>
                <li>
                    <label for="uName">User Name:</label>
                    <input type="text" name="uName" @Validation.For( "uName" ) id="uName" value="" />
                    <p>@Html.ValidationMessage( "uName" )</p>
                    <p> @Html.Raw( userNameMessage )</p>
                </li>
                <li>
                    <label for="uPwd">Password:</label>
                    <input type="password" name="uPwd" @Validation.For( "uPwd" ) id="uPwd" value="" />
                    <p>@Html.ValidationMessage( "uPwd" )</p>
                </li>
                <li>
                    <label for="uPwdr">Password:</label>
                    <input type="password" name="uPwdr" @Validation.For( "uPwdr" ) id="uPwdr" value="" />
                    <p>@Html.ValidationMessage( "uPwdr" )</p>
                    <p>@Html.Raw( passwordMessage )</p>
                </li>
                <li>
                    <label for="email">Email:</label>
                    <span>@Html.TextBox( "email", Request["email"] )</span>
                    <p>@Html.ValidationMessage( "email" )</p>
                    <p>@Html.Raw( emailMessage )</p>

                </li>
            </ol>
            <p class="form-actions">
                <input type="submit" name="btn" value="SignUp" title="SignUp" /> <a href="~/" style="padding-left: 1em; font-size: 12px">or Login</a>
            </p>

        </fieldset>
    </form>
</body>
</html>
