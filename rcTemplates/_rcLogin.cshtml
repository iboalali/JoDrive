@{

    if ( Session["userName"] != null ) {
        Response.Redirect( "~/home" );

    }

    //super simple login page
    //just to provide basic protection for control panel
    Validation.RequireField( "uName", "Required field" );
    Validation.RequireField( "uPwd", "Required field" );
    //ModelState.AddModelError( "LogInError", "Invalid username or password" );
    //ModelState.AddError("LogInError", "Invalid username or password");
    //Validation.AddFormError( "Invalid username or password" );
    string message = string.Empty;

    Validation.RequireField( "suName", "Required field" );
    Validation.RequireField( "suPwd", "Required field" );
    Validation.RequireField( "semail", "Required field" );


    
    string userNameMessage = string.Empty;
    string passwordMessage = string.Empty;
    var db = Database.Open( "GP" );
    var sqlSelect = string.Empty;
    if ( IsPost ) {

        var un = Request["uName"];
        var up = Request["uPwd"];


        sqlSelect = "Select * from rc_Login where rcUser=@0 and rcPwd=@1";
        var data = db.QuerySingle( sqlSelect, un, up );

        if ( data != null ) {

            if ( un == "admin" ) {
                message = "Invalid username or password";

            } else {
                Session["userName"] = un;
                sqlSelect = "SELECT userName FROM rc_SessionInfo";
                data = db.QuerySingle( sqlSelect );

                if ( data != null ) {

                    if ( Request["ReturnURL"] != null && (string) Session["userName"] == data.userName ) {
                        Response.Redirect( "~/" + Request["ReturnURL"] );

                    } else {
                        sqlSelect = "DELETE FROM rc_SessionInfo WHERE userName=@0";
                        db.Execute( sqlSelect, data.userName );
                        
                        sqlSelect = "INSERT INTO rc_SessionInfo(userName) VALUES(@0)";
                        db.Execute( sqlSelect, un );
                        Response.Redirect( "~/home" );
                        
                    }
                } else {
                    
                    sqlSelect = "INSERT INTO rc_SessionInfo(userName) VALUES(@0)";
                    db.Execute( sqlSelect, un );
                    
                    Response.Redirect( "~/home" );

                }

            }

        } else {
            message = "Invalid username or password";

        }

    }
}

<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/jquery-ui.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/mvc/4.0/jquery.validate.unobtrusive.js"></script>
    <link type="text/css" rel="Stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/themes/black-tie/jquery-ui.css" />
    <link href="~/rcLayouts/default/css/loginStyle.css" rel="stylesheet" />

</head>
<body>
    <form method="post" action="">
        <fieldset style="background-color: white; width: 312px; font-size: 10px">
            <!--<legend>Login</legend>-->
            <ol>
                <li>
                    <label for="uName">User Name:</label>
                    <input type="text" name="uName" @Validation.For( "uName" ) id="uName" value="" />
                    <p>@Html.ValidationMessage( "uName" )</p>
                </li>
                <li>
                    <label for="uPwd">Password:</label>
                    <input type="password" name="uPwd" @Validation.For( "uPwd" ) id="uPwd" value="" />
                    <p>@Html.ValidationMessage( "uPwd" )</p>
                </li>
                <li>
                    <p style="color: #f00; font-size: 12px"> @Html.Raw( message )</p>
                </li>
            </ol>

            <p class="form-actions">
                <input type="submit" name="btn" value="Login" title="Login" />
                <a href="~/signup" style="padding-left: 1em; font-size: 12px">or SignUp</a>
            </p>

        </fieldset>
    </form>


</body>
</html>